# Mask Truffle AI - åŒºå—é“¾æ•°æ®ä¸Šé“¾ç³»ç»Ÿ

åŸºäºTruffleå’ŒReactçš„åŒºå—é“¾æ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢ç³»ç»Ÿï¼Œå®ç°æ•°æ®çš„é“¾ä¸Šå­˜å‚¨ã€æŸ¥è¯¢å’Œç®¡ç†åŠŸèƒ½ã€‚

## ğŸš€ é¡¹ç›®ç‰¹æ€§

- **æ™ºèƒ½åˆçº¦**: ä½¿ç”¨Solidityå¼€å‘çš„æ•°æ®å­˜å‚¨åˆçº¦ï¼Œæ”¯æŒæ•°æ®ä¸Šé“¾ã€æŸ¥è¯¢ã€æ›´æ–°å’Œåœç”¨
- **å‰ç«¯ç•Œé¢**: åŸºäºReact + Ant Designçš„ç°ä»£åŒ–ç”¨æˆ·ç•Œé¢
- **é’±åŒ…é›†æˆ**: æ”¯æŒMetaMaskç­‰Web3é’±åŒ…è¿æ¥
- **å¤šç½‘ç»œæ”¯æŒ**: æ”¯æŒä¸»ç½‘ã€æµ‹è¯•ç½‘å’Œæœ¬åœ°å¼€å‘ç½‘ç»œ
- **æ•°æ®æŸ¥è¯¢**: æ”¯æŒå¤šç§æŸ¥è¯¢æ–¹å¼ï¼šæŒ‰ç±»å‹ã€åˆ›å»ºè€…ã€IDç­‰
- **å®æ—¶ç»Ÿè®¡**: æ˜¾ç¤ºé“¾ä¸Šæ•°æ®ç»Ÿè®¡ä¿¡æ¯
- **å“åº”å¼è®¾è®¡**: é€‚é…ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯

## ğŸ“‹ æŠ€æœ¯æ ˆ

### åç«¯ (åŒºå—é“¾)
- **Solidity** ^0.8.19 - æ™ºèƒ½åˆçº¦å¼€å‘
- **Truffle** ^5.11.5 - å¼€å‘æ¡†æ¶
- **OpenZeppelin** ^4.9.3 - å®‰å…¨åˆçº¦åº“
- **HDWallet Provider** - é’±åŒ…è¿æ¥

### å‰ç«¯
- **React** ^18.2.0 - ç”¨æˆ·ç•Œé¢
- **Ethers.js** ^5.7.2 - åŒºå—é“¾äº¤äº’
- **Web3-React** - é’±åŒ…è¿æ¥ç®¡ç†
- **Ant Design** ^5.6.1 - UIç»„ä»¶åº“
- **React Hooks** - çŠ¶æ€ç®¡ç†

## ğŸ› ï¸ å®‰è£…ä¸è¿è¡Œ

### ç¯å¢ƒè¦æ±‚
- Node.js >= 16.0.0
- npm >= 8.0.0
- MetaMask æµè§ˆå™¨æ‰©å±•
- Ganache CLI (æœ¬åœ°å¼€å‘)

### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/juzhiqiang/mask-truffle-ai.git
cd mask-truffle-ai
```

### 2. å®‰è£…ä¾èµ–
```bash
# å®‰è£…æ ¹ç›®å½•å’Œå®¢æˆ·ç«¯ä¾èµ–
npm run install-all

# æˆ–è€…åˆ†åˆ«å®‰è£…
npm install
cd client && npm install
```

### 3. ç¯å¢ƒé…ç½®
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®ä»¥ä¸‹å˜é‡ï¼š
INFURA_PROJECT_ID=your_infura_project_id
MNEMONIC=your_wallet_mnemonic_phrase
REACT_APP_INFURA_ID=your_infura_project_id
REACT_APP_NETWORK=sepolia
```

### 4. ç¼–è¯‘æ™ºèƒ½åˆçº¦
```bash
npm run compile
```

### 5. éƒ¨ç½²åˆçº¦

#### æœ¬åœ°å¼€å‘ç½‘ç»œ
```bash
# å¯åŠ¨Ganache (æ–°ç»ˆç«¯)
npx ganache-cli

# éƒ¨ç½²åˆ°æœ¬åœ°ç½‘ç»œ
npm run migrate
```

#### æµ‹è¯•ç½‘ç»œ (Sepolia)
```bash
# éƒ¨ç½²åˆ°Sepoliaæµ‹è¯•ç½‘
truffle migrate --network sepolia
```

### 6. æ›´æ–°å‰ç«¯é…ç½®
éƒ¨ç½²æˆåŠŸåï¼Œå°†åˆçº¦åœ°å€æ›´æ–°åˆ° `client/src/services/DataStorageService.js` ä¸­çš„ `CONTRACT_ADDRESS`ã€‚

### 7. å¯åŠ¨å‰ç«¯åº”ç”¨
```bash
npm run dev
# æˆ–è€…
cd client && npm start
```

åº”ç”¨å°†åœ¨ http://localhost:3000 ä¸Šè¿è¡Œã€‚

## ğŸ”§ é¡¹ç›®ç»“æ„

```
mask-truffle-ai/
â”œâ”€â”€ contracts/                 # æ™ºèƒ½åˆçº¦
â”‚   â”œâ”€â”€ DataStorage.sol        # ä¸»æ•°æ®å­˜å‚¨åˆçº¦
â”‚   â””â”€â”€ Migrations.sol         # Truffleè¿ç§»åˆçº¦
â”œâ”€â”€ migrations/                # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ 1_initial_migration.js
â”‚   â””â”€â”€ 2_deploy_contracts.js
â”œâ”€â”€ test/                      # åˆçº¦æµ‹è¯•
â”‚   â””â”€â”€ DataStorage.test.js
â”œâ”€â”€ client/                    # Reactå‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â””â”€â”€ index.html
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/        # ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ WalletConnection.js
â”‚   â”‚   â”œâ”€â”€ services/          # æœåŠ¡ç±»
â”‚   â”‚   â”‚   â””â”€â”€ DataStorageService.js
â”‚   â”‚   â”œâ”€â”€ App.js            # ä¸»ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ App.css           # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ index.js          # å…¥å£æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ index.css
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ truffle-config.js         # Truffleé…ç½®
â”œâ”€â”€ package.json              # é¡¹ç›®ä¾èµ–
â””â”€â”€ README.md
```

## ğŸ’¡ åŠŸèƒ½è¯´æ˜

### æ™ºèƒ½åˆçº¦åŠŸèƒ½
- **æ•°æ®å­˜å‚¨** (`storeData`): å°†æ•°æ®å­˜å‚¨åˆ°åŒºå—é“¾
- **æ•°æ®æŸ¥è¯¢** (`getDataRecord`): æ ¹æ®IDæŸ¥è¯¢å•æ¡è®°å½•
- **æ‰¹é‡æŸ¥è¯¢** (`getActiveRecords`): åˆ†é¡µæŸ¥è¯¢æ´»è·ƒè®°å½•
- **ç±»å‹æŸ¥è¯¢** (`getRecordsByType`): æŒ‰æ•°æ®ç±»å‹æŸ¥è¯¢
- **åˆ›å»ºè€…æŸ¥è¯¢** (`getRecordsByCreator`): æŒ‰åˆ›å»ºè€…æŸ¥è¯¢
- **æ•°æ®æ›´æ–°** (`updateData`): æ›´æ–°ç°æœ‰æ•°æ®
- **æ•°æ®åœç”¨** (`deactivateData`): åœç”¨æ•°æ®è®°å½•
- **ç»Ÿè®¡ä¿¡æ¯** (`getStats`): è·å–ç»Ÿè®¡æ•°æ®

### å‰ç«¯åŠŸèƒ½
- **é’±åŒ…è¿æ¥**: æ”¯æŒMetaMaskè¿æ¥å’Œæ–­å¼€
- **æ•°æ®ä¸Šé“¾**: è¡¨å•æäº¤æ•°æ®åˆ°åŒºå—é“¾
- **å¤šç§æŸ¥è¯¢**: æ”¯æŒå…¨éƒ¨ã€ç±»å‹ã€åˆ›å»ºè€…ã€IDæŸ¥è¯¢
- **æ•°æ®å±•ç¤º**: è¡¨æ ¼å½¢å¼å±•ç¤ºæŸ¥è¯¢ç»“æœ
- **å®æ—¶ç»Ÿè®¡**: æ˜¾ç¤ºæ€»è®°å½•æ•°å’Œæ´»è·ƒè®°å½•æ•°
- **å“åº”å¼è®¾è®¡**: é€‚é…ä¸åŒå±å¹•å°ºå¯¸

## ğŸ§ª æµ‹è¯•

### è¿è¡Œåˆçº¦æµ‹è¯•
```bash
npm run test
# æˆ–è€…
truffle test
```

### æµ‹è¯•ç½‘ç»œäº¤äº’
1. ç¡®ä¿MetaMaskå·²è¿æ¥åˆ°æ­£ç¡®çš„ç½‘ç»œ
2. ç¡®ä¿è´¦æˆ·æœ‰è¶³å¤Ÿçš„æµ‹è¯•ETH
3. åœ¨å‰ç«¯ç•Œé¢è¿›è¡Œå„ç§æ“ä½œæµ‹è¯•

## ğŸ“ ä½¿ç”¨è¯´æ˜

### 1. è¿æ¥é’±åŒ…
- ç‚¹å‡»å³ä¸Šè§’"è¿æ¥é’±åŒ…"æŒ‰é’®
- é€‰æ‹©MetaMaskå¹¶æˆæƒè¿æ¥
- ç¡®è®¤ç½‘ç»œåˆ‡æ¢ï¼ˆå¦‚éœ€è¦ï¼‰

### 2. æŸ¥è¯¢æ•°æ®
- åœ¨å·¦ä¾§é¢æ¿é€‰æ‹©æŸ¥è¯¢ç±»å‹
- è¾“å…¥æŸ¥è¯¢æ¡ä»¶ï¼ˆå¦‚é€‚ç”¨ï¼‰
- ç‚¹å‡»"æŸ¥è¯¢"æŒ‰é’®æŸ¥çœ‹ç»“æœ

### 3. æ·»åŠ æ•°æ®
- ç‚¹å‡»"æ·»åŠ æ•°æ®"æŒ‰é’®
- å¡«å†™æ•°æ®ç±»å‹å’Œå†…å®¹
- ç¡®è®¤äº¤æ˜“å¹¶ç­‰å¾…ä¸Šé“¾

### 4. æ•°æ®ç±»å‹ç¤ºä¾‹
- `transaction`: äº¤æ˜“ç›¸å…³æ•°æ®
- `contract`: åˆçº¦ç›¸å…³æ•°æ®
- `user`: ç”¨æˆ·ç›¸å…³æ•°æ®
- `log`: æ—¥å¿—æ•°æ®
- æˆ–è‡ªå®šä¹‰ç±»å‹

## ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

- **ç§é’¥å®‰å…¨**: æ°¸è¿œä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç ç§é’¥
- **ç½‘ç»œç¡®è®¤**: éƒ¨ç½²å‰ç¡®è®¤ç›®æ ‡ç½‘ç»œ
- **åˆçº¦éªŒè¯**: åœ¨åŒºå—é“¾æµè§ˆå™¨ä¸ŠéªŒè¯åˆçº¦æºç 
- **æƒé™ç®¡ç†**: æ³¨æ„åˆçº¦çš„æ‰€æœ‰è€…æƒé™
- **Gasè´¹ç”¨**: æ³¨æ„äº¤æ˜“çš„Gasè´¹ç”¨è®¾ç½®

## ğŸš€ éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

### 1. ä¸»ç½‘éƒ¨ç½²
```bash
# ç¡®ä¿.envæ–‡ä»¶é…ç½®æ­£ç¡®
truffle migrate --network mainnet

# éªŒè¯åˆçº¦ï¼ˆå¯é€‰ï¼‰
truffle run verify DataStorage --network mainnet
```

### 2. å‰ç«¯éƒ¨ç½²
```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
cd client
npm run build

# éƒ¨ç½²åˆ°é™æ€æ‰˜ç®¡æœåŠ¡ï¼ˆå¦‚Netlify, Vercelç­‰ï¼‰
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™‹â€â™‚ï¸ å¸¸è§é—®é¢˜

### Q: MetaMaskè¿æ¥å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: ç¡®ä¿å·²å®‰è£…MetaMaskæ‰©å±•ï¼Œå¹¶ä¸”æµè§ˆå™¨å…è®¸è®¿é—®ã€‚æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œè´¦æˆ·è§£é”çŠ¶æ€ã€‚

### Q: åˆçº¦éƒ¨ç½²å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥ç½‘ç»œé…ç½®ã€è´¦æˆ·ä½™é¢ã€Gasè®¾ç½®ã€‚ç¡®ä¿Infuraé¡¹ç›®IDå’ŒåŠ©è®°è¯æ­£ç¡®ã€‚

### Q: å‰ç«¯æ˜¾ç¤º"Contract not initialized"ï¼Ÿ
A: ç¡®ä¿åˆçº¦å·²æ­£ç¡®éƒ¨ç½²ï¼Œå¹¶ä¸”åœ¨DataStorageService.jsä¸­é…ç½®äº†æ­£ç¡®çš„åˆçº¦åœ°å€ã€‚

### Q: äº¤æ˜“å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥è´¦æˆ·ETHä½™é¢ã€Gasè®¾ç½®ã€ç½‘ç»œæ‹¥å µæƒ…å†µã€‚ç¡®ä¿åˆçº¦æ–¹æ³•è°ƒç”¨å‚æ•°æ­£ç¡®ã€‚

## ğŸ“ è”ç³»æˆ‘ä»¬

- é¡¹ç›®åœ°å€: [GitHub Repository](https://github.com/juzhiqiang/mask-truffle-ai)
- é—®é¢˜åé¦ˆ: [Issues](https://github.com/juzhiqiang/mask-truffle-ai/issues)
- é‚®ç®±: your-email@example.com

---

**æ„Ÿè°¢ä½¿ç”¨ Mask Truffle AI åŒºå—é“¾æ•°æ®ä¸Šé“¾ç³»ç»Ÿï¼** ğŸ‰
